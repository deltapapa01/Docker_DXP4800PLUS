# paperlessngx.env 
# ==========================================================================
# WICHTIG:
# - PaperlessNGX mit Redis und MariaDB
# - Diese Datei wird von Docker-Compose eingelesen und setzt Umgebungsvariablen
# - Keine Leerzeilen oder Kommentare innerhalb der Datei einfügen!
# - Werte mit Sonderzeichen am besten in Anführungszeichen setzen:  PASS="abc!?_%"
# - Datei schützen: chmod 600 paperlessngx.env
# ==========================================================================
# Versionen
# v1.0 - Grundversion von https://github.com/deltapapa01
# v2.0 - Community-Paket: Paperless-ngx + Export-Skript (UGREEN NAS) eingebaut
# ==========================================================================
# Mit Unterstützung von:
# https://ugreen-forum.de/
# https://www.facebook.com/groups/ugreennasyncdebenutzergruppe/
# Roman Glos (Community)
# https://deltapapa.de/
# ==========================================================================

# -------------------------
# UID und GID
# Über Terminal-Befehl: "ID" herausfinden
# -------------------------
USERMAP_UID=1000
USERMAP_GID=10

# -------------------------
# Paperless Admin User
# Wird beim ersten Start angelegt; danach kannst du es auskommentieren
# Auskommentieren, wenn eine leere Paperless Instanz zum Import erzeugt werden soll!
# -------------------------
PAPERLESS_ADMIN_USER=BENUTZERNAME
PAPERLESS_ADMIN_PASSWORD=BENUTZER-PASSWORT

# -------------------------
# Paperless Secret Key (einmalig setzen, dann NIE wieder ändern!)
# Im Terminal-Befehl: openssl rand -base64 48
# -------------------------
PAPERLESS_SECRET_KEY="supergeheimesWortmitvielenzeichen1234567890!@#$%^&*()"

# -------------------------
# Paperless Basics
# -------------------------
PAPERLESS_TIME_ZONE=Europe/Berlin
PAPERLESS_OCR_LANGUAGE=deu+eng

# -------------------------
# Redis
# -------------------------
PAPERLESS_REDIS=redis://broker:6379

# -------------------------
# MariaDB
# -------------------------
# Datenbankname (nach Bedarf anpassen)
MYSQL_DATABASE=paperless
# Datenbankbenutzer (nach Bedarf anpassen)
MYSQL_USER=paperlessuser
# Datenbankpasswort (nach Bedarf anpassen)
MYSQL_PASSWORD=paperlesspass
# Root-Passwort (nach Bedarf anpassen)
MYSQL_ROOT_PASSWORD=rootpass

# -------------------------
# Paperless Optional Settings
# -------------------------

# Umgebungsvariablen für den MariaDB-Container festlegen
PAPERLESS_DBENGINE=mariadb
# Hostname des MariaDB-Containers (entspricht dem Servicenamen "db")
PAPERLESS_DBHOST=paper-db
# Datenbankname (entspricht der Variablen "MARIADB_DATABASE" im Abschnitt services: -> db: )
PAPERLESS_DBNAME=paperless
# Benutzername (entspricht der Variablen "MARIADB_USER" im Abschnitt services: -> db: )
PAPERLESS_DBUSER=paperlessuser
# Benutzername (entspricht der Variablen "MARIADB_PASSWORD" im Abschnitt services: -> db: )
PAPERLESS_DBPASS=paperlesspass
# Weiterleitungsport (entspricht der Variablen "ports:" im Abschnitt services: -> db: )
PAPERLESS_DBPORT=3306
PAPERLESS_FILENAME_FORMAT={{ created_year }}/{{ created }}-{{ correspondent }}-{{ document_type }}-{{ title }}
PAPERLESS_FILENAME_FORMAT_REMOVE_NONE=true
PAPERLESS_FILENAME_DATE_ORDER=YMD
PAPERLESS_CONSUMER_DELETE_DUPLICATES=true
PAPERLESS_CONSUMER_RECURSIVE=true
PAPERLESS_IGNORE_DATES=1970-01-01
PAPERLESS_OCR_USER_ARGS={"invalidate_digital_signatures":true}

# ============================================================
# SMTP / Mail (für Exportscript)
# ============================================================
MAIL_ENABLED=1
MAIL_ON_SUCCESS=1
MAIL_ON_FAILURE=1
# 1 = [OK]/[FAIL] statt ✅/❌ (falls dein Mail-Server UTF-8 zerschießt)
MAIL_ASCII_ICONS=0

# 1 = Mail als multipart (Text + HTML). 0 = nur Text.
MAIL_SEND_HTML=1

# Dateiliste in Mail (HTML + Text) – gut für Handy/Outlook
MAIL_FILELIST_ENABLED=1
# Wie viele Dateien sollen angezeigt werden?
MAIL_FILELIST_LIMIT=10

# Exportierte Dateien (Inhalt des ZIP-Exports)
# 1 = Liste der exportierten Dateien in Mail anzeigen
MAIL_EXPORTED_FILES_ENABLED=0
# Modus: grouped = pro Dokument alle Varianten (Original/Archive/Thumbnail) anzeigen
#        primary = nur die Hauptdatei (z. B. nur PDF) anzeigen
MAIL_EXPORTED_FILES_MODE=primary
# Welche Endungen gelten als Hauptdatei? (comma-separated, ohne Punkt)
MAIL_EXPORTED_FILES_PRIMARY_EXTS=pdf
# Wie viele Einträge/Dokumente sollen angezeigt werden? (0 = aus)
MAIL_EXPORTED_FILES_LIMIT=50
SMTP_HOST=smtp.example.com
TLS_ENABLED=1
# SMTP_PORT leer lassen = auto (TLS->587, ohne TLS->25). Für SMTPS: 465
SMTP_PORT=
SMTP_USER=user@example.com
SMTP_PASS="CHANGE_ME_SMTP_PASSWORD"

MAIL_FROM=user@example.com
MAIL_FROM_NAME="UGREEN Paperless Export"
# Mehrere Empfänger möglich: a@b.de,b@c.de
MAIL_TO=ziel@example.com

# ============================================================
# Skript: Paperless Export (document_exporter)
# ============================================================
PAPERLESS_CONTAINER_NAME=PaperlessNgx
# Host-Zielordner für ZIP-Backups (muss existieren/angelegt werden können)
PAPERLESS_HOST_BACKUP_DIR=/volume1/docker/paperlessngx-mdb/export
PAPERLESS_KEEP_FILES=7
# Temp-Ordner im Container
PAPERLESS_CONTAINER_TMP_DIR=/usr/src/paperless/export/_tmp
# Optional: Logfile (Host-Pfad). Wenn leer, nutzt das Script ./scripts/exporter.log
PAPERLESS_EXPORT_LOGFILE=/volume1/tools/scripts/paperlessngx/exporter.log
# Hinweis: Wenn du unbedingt /tmp nutzen willst, setze z.B. PAPERLESS_CONTAINER_TMP_DIR=/tmp/paperless-export.
# Das Script versucht dann automatisch chmod 777 im Container (via docker exec -u 0).